(function(){function e(){var e,n,r;e=$("#login-username input").get(0).value,c=t("e_code"),n=md5(md5(md5($("#login-pwd input").get(0).value))+c),r="u="+e+"&p="+n+"&c="+c,$.post("/pass?action=login",r,function(e){e=$.parseJSON(e);if(e.errcode=="0"){location.reload();return}switch(e.errcode){case"1":case"3":$("#login-box .tooltip").removeClass("hide uerr perr").addClass("uerr");break;case"2":$("#login-box .tooltip").removeClass("hide uerr perr").addClass("perr")}$("#login-box .tooltip-inner").html(e.tip)})}function t(e){return document.cookie.match(new RegExp(e+"=([^;]*)")),RegExp.$1}$("#login-username input").blur(function(){var e=this.value;e&&$.getJSON("/check?u="+$("#login-username input").get(0).value)}),$("#login-auth a").click(function(){typeof md5=="function"?e():$.getScript("/static/js/md5.js",function(t,n,r){e()})}),$("#reg-auth a").click(function(){$.post("/pass?action=reg",$("#reg-form").serialize(),function(e){e=$.parseJSON(e),e.errcode=="0"&&location.reload()})})})()